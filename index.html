<script type="module">

    // import kaboom.js
    import kaboom from "https://unpkg.com/kaplay@3001.0.0-alpha.4/dist/kaboom.mjs"

    // initialize kaboom context
    kaboom();
    setBackground(255,255,255);
    loadSprite("bean","sprites/bean.png");
    let score = -1;

    function createEnemy() {
        let rand_x = rand(width());
        let rand_y = rand(height());
        add([
            sprite('bean'),
            area(),
            pos(rand_x, rand_y),
            "bean",
        ]);
    }


    scene("game", () => {
        score++;
        add([
            text("Score: " + score, {
                size: 48,
                font: "sans-serif",
            }),
            color(0),
            pos(20,20),
        ])

        createEnemy();

        onClick(() => go("game"))

        if (score == 10){
            go("win");
        }
    });

    scene("start",() =>{
        add([
            text("click to play", {
                size: 48,
                font: "sans-serif",
            }),
            color(0),
            pos(20,20),
        ]);
        onClick(() => go("game"))
    });

    scene("win",() =>{
        add([
            text("You win!!!", {
                size: 48,
                font: "sans-serif",
            }),
            color(0),
            pos(20,20),
        ]);
    });

    add([
    sprite("bean"),
       scale(3),
])




go("start");
</script>